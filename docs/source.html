<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;unistd.h&gt;

typedef struct
{
	int HEIGHT;
	char CHR;
	char COLOR[32];
	char NAME[32];
	char FILE_[32];
}TRIANGLE_T;

enum {false, true};

const char *red = &quot;\033[31m&quot;;	
const char *green = &quot;\033[32m&quot;;
const char *yellow = &quot;\033[33m&quot;;
const char *blue = &quot;\033[34m&quot;;
const char *default_color = &quot;\033[0m&quot;;

#define HEIGHT_DEFAULT 15
#define NAME_DEFAULT &quot;NAME&quot;
#define CHR_DEFAULT '#'

void draw_triangle(TRIANGLE_T *triangle, FILE *fp)
{
	if(!triangle-&gt;HEIGHT) {
		triangle-&gt;HEIGHT = HEIGHT_DEFAULT;
	}
	if(!triangle-&gt;NAME[0]) {
		strcpy(triangle-&gt;NAME, NAME_DEFAULT);
	}
	if(!triangle-&gt;COLOR[0]) {	
		strcpy(triangle-&gt;COLOR, default_color);
	}
	if(!triangle-&gt;CHR) {
		triangle-&gt;CHR = CHR_DEFAULT;
	}
	int n = 1;
	if(fp != NULL) fprintf(fp, &quot;%s&quot;, triangle-&gt;COLOR);
	printf(&quot;%s&quot;, triangle-&gt;COLOR);
	for(int i = 0; i &lt; triangle-&gt;HEIGHT; i++) {
		for(int j = 0; j &lt; n; j++) {
			putchar(triangle-&gt;CHR);
			putchar(' ');
			if(fp != NULL) {
				fputc(triangle-&gt;CHR, fp);
				fputc(' ', fp);
			}
		}
		putchar('\n');
		if(fp != NULL) fputc('\n', fp);
		n++;
	}
	printf(&quot;%s&quot;, default_color);
}

void print_info(TRIANGLE_T *triangle, FILE *fp)
{
	printf(&quot;Triangle info:\n&quot;);
	printf(&quot;NAME:      %s\n&quot;, triangle-&gt;NAME); 
	printf(&quot;HEIGHT:      %d\n&quot;, triangle-&gt;HEIGHT); 
	printf(&quot;CHAR:      %c\n&quot;, triangle-&gt;CHR); 
	if(fp != NULL) {
		printf(&quot;FILE:      %s\n&quot;, triangle-&gt;FILE_);
		fprintf(fp, &quot;%s&quot;, default_color);
		fprintf(fp, &quot;Triangle info:\n&quot;);
		fprintf(fp, &quot;NAME:      %s\n&quot;, triangle-&gt;NAME); 
		fprintf(fp, &quot;HEIGHT:      %d\n&quot;, triangle-&gt;HEIGHT); 
		fprintf(fp, &quot;CHAR:      %c\n&quot;, triangle-&gt;CHR);
		fprintf(fp, &quot;FILE:      %s\n&quot;, triangle-&gt;FILE_);
	}
}

int main(int argc, char *argv[])
{
	TRIANGLE_T triangle = {0};
	int info = false;
	FILE *fp = NULL;
	int opt;
	while((opt = getopt(argc, argv, &quot;h:n:f:c:t:il&quot;)) != -1) {
		switch(opt) {
			case 'h':
				triangle.HEIGHT = atoi(optarg);
				break;
			case 'n':
				strcpy(triangle.NAME, optarg);
				break;
			case 't':
				if(!strcmp(optarg, &quot;red&quot;))
					strcpy(triangle.COLOR, red);
				else if(!strcmp(optarg, &quot;green&quot;))
					strcpy(triangle.COLOR, green);
				else if(!strcmp(optarg, &quot;yellow&quot;))
					strcpy(triangle.COLOR, yellow);
				else if(!strcmp(optarg, &quot;blue&quot;))
					strcpy(triangle.COLOR, blue);
				else {
					fprintf(stderr, &quot;Unsupported Color:%s.\n&quot;,\
					optarg);
					fprintf(stderr, &quot;Use -l option to print &quot;\
					&quot;a list of supported colors\n&quot;);
					exit(EXIT_FAILURE);
				}
				break;
			case 'l':
				if(optind == 2) {
					printf(&quot;Supported Colors:\n&quot;);
					printf(&quot;Red, Green, Yellow, Blue\n&quot;);
					exit(EXIT_SUCCESS);
				}
				break;
			case 'c':
				triangle.CHR = optarg[0];
				break;
			case 'f':
				strcpy(triangle.FILE_, optarg);
				break;
			case 'i':
				info = true;
				break;
			default:
				printf(&quot;Usage:\n%s [-h|-f|-n|-c|-C] args\n&quot;, argv[0]);
				exit(EXIT_FAILURE);
		}
	}
	if(triangle.FILE_[0]) {
		fp = fopen(triangle.FILE_, &quot;w+&quot;);
		if(fp == NULL) {
			fprintf(stderr, &quot;Failed to open %s\n&quot;, triangle.FILE_);
			return 1;
		}
	}
	draw_triangle(&amp;triangle, fp);
	if(info) {
		print_info(&amp;triangle, fp);
	}
	if(fp != NULL) fclose(fp);
	return 0;
}
</code></pre>
